!function(Z){"use strict";Z.Zebra_Dialog=function(){var h,_={animation_speed_hide:250,animation_speed_show:0,auto_close:!(this.version="2.1.2"),auto_focus_button:!0,buttons:!0,center_buttons:!1,custom_class:!1,default_value:"",height:0,keyboard:!0,max_height:0,message:"",modal:!0,overlay_close:!0,overlay_container:"body",overlay_opacity:".9",position:"center",reposition_speed:500,show_close_button:!0,source:!1,title:"",type:"information",vcenter_short_message:!0,width:0,onClose:null},f=this,b={},m=!1,y=function(){var t,e,s,i=Z(window).width(),o=Z(window).height(),n=f.dialog.width(),a=f.dialog.height(),r={left:0,top:0,right:i-n,bottom:o-a,center:(i-n)/2,middle:(o-a)/2};f.dialog_left=void 0,f.dialog_top=void 0,Z.isArray(f.settings.position)&&2===f.settings.position.length&&"string"==typeof f.settings.position[0]&&f.settings.position[0].match(/^(left|right|center)[\s0-9\+\-]*$/)&&"string"==typeof f.settings.position[1]&&f.settings.position[1].match(/^(top|bottom|middle)[\s0-9\+\-]*$/)&&(f.settings.position[0]=f.settings.position[0].toLowerCase(),f.settings.position[1]=f.settings.position[1].toLowerCase(),Z.each(r,function(t,e){var s,i;for(s=0;s<2;s++)(i=f.settings.position[s].replace(t,e))!==f.settings.position[s]&&(0===s?f.dialog_left=g(i):f.dialog_top=g(i))})),void 0!==f.dialog_left&&void 0!==f.dialog_top||(f.dialog_left=r.center,f.dialog_top=r.middle),f.dialog_top<0&&(f.dialog_top=0),o<a&&f.body.css("height",o-(Z(".ZebraDialog_Title",f.dialog)?Z(".ZebraDialog_Title",f.dialog).outerHeight():0)-(Z(".ZebraDialog_Buttons",f.dialog)?Z(".ZebraDialog_Buttons",f.dialog).outerHeight():0)-(parseFloat(f.body.css("paddingTop"))||0)-(parseFloat(f.body.css("paddingBottom"))||0)-(parseFloat(f.body.css("borderTopWidth"))||0)-(parseFloat(f.body.css("borderBottomWidth"))||0)),f.settings.vcenter_short_message&&(e=(t=f.body.find("div:first")).height())<(s=f.body.height())&&t.css("padding-top",(s-e)/2),"boolean"==typeof arguments[0]&&!1===arguments[0]||0===f.settings.reposition_speed?f.dialog.css({left:f.dialog_left,top:f.dialog_top,visibility:"visible",opacity:0}).animate({opacity:"1"},f.settings.animation_speed_show):(f.dialog.stop(!0),f.dialog.css("visibility","visible").animate({left:f.dialog_left,top:f.dialog_top},f.settings.reposition_speed)),void 0===h&&(!1!==f.settings.auto_focus_button?f.dialog.find("a[class^=ZebraDialog_Button]").eq(!0===f.settings.auto_focus_button?0:f.settings.auto_focus_button).focus():f.body.attr("tabindex",1).focus().removeAttr("tabindex")),f.isIE6&&setTimeout(v,500)},v=function(){var t=Z(window).scrollTop(),e=Z(window).scrollLeft();f.settings.modal&&f.overlay.css({top:t,left:e}),f.dialog.css({left:f.dialog_left+e,top:f.dialog_top+t})},w=function(){switch(f.settings.type){case"confirmation":case"error":case"information":case"question":case"warning":case"prompt":return f.settings.type.charAt(0).toUpperCase()+f.settings.type.slice(1).toLowerCase();default:return!1}},g=function(t){var e=0;for(t=t.replace(/\s/g,"").match(/[+\-]?([0-9\.\s]+)/g)||[];t.length;)e+=parseFloat(t.shift());return e},D={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(t){var e,s,i;for(e=0;e<t.length;e++)if(s=t[e].string,i=t[e].prop,this.versionSearchString=t[e].versionSearch||t[e].identity,s){if(-1!==s.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};return f.settings={},"string"==typeof arguments[0]&&(b.message=arguments[0]),"object"!=typeof arguments[0]&&"object"!=typeof arguments[1]||(b=Z.extend(b,"object"==typeof arguments[0]?arguments[0]:arguments[1])),f.init=function(){var t,i,e,s,o,n,a,r,g,l,c,d,p,u=0;if(f.settings=Z.extend({},_,b),f.isIE6="explorer"===D.name&&6===D.version||!1,f.settings.modal&&(f.overlay=Z("<div>",{"class":"ZebraDialogOverlay"}).css({position:f.isIE6?"absolute":"fixed",left:0,top:0,opacity:f.settings.overlay_opacity+""}),"body"!==f.settings.overlay_container&&(n=(o=f.settings.overlay_container).offset(),f.overlay.css({left:n.left,top:n.top,width:o.outerWidth(),height:o.outerHeight()})),f.settings.overlay_close&&f.overlay.on("click",function(){f.close()}),f.overlay.appendTo(f.settings.overlay_container)),f.dialog=Z("<div>",{"class":"ZebraDialog"+(f.settings.custom_class?" "+f.settings.custom_class:"")+(!1!==w()?" ZebraDialog_Icon ZebraDialog_"+w():"")}).css({position:f.isIE6?"absolute":"fixed",left:0,top:0,visibility:"hidden"}),Z(".ZebraDialog").each(function(){var t=Z(this).css("zIndex");t&&u<t&&(u=t)}),0<u&&f.dialog.css("zIndex",u+1),!f.settings.buttons&&f.settings.auto_close&&f.dialog.attr("id","ZebraDialog_"+Math.floor(9999999*Math.random())),d=parseInt(f.settings.width,10),!isNaN(d)&&d===f.settings.width&&d.toString()===f.settings.width.toString()&&0<d&&f.dialog.css("width",f.settings.width),f.settings.title?c=Z("<h3>",{"class":"ZebraDialog_Title"}).html(f.settings.title).appendTo(f.dialog):f.dialog.addClass("ZebraDialog_NoTitle"),f.body=Z("<div>",{"class":"ZebraDialog_Body"}),0<f.settings.height&&f.body.css("height",f.settings.height),0<f.settings.max_height&&(f.body.css("max-height",f.settings.max_height),f.isIE6&&f.body.attr("style","height: expression(this.scrollHeight > "+f.settings.max_height+' ? "'+f.settings.max_height+'px" : "85px")')),"prompt"===f.settings.type&&(f.settings.message+='<input type="text" name="ZebraDialog_Prompt_Input" value="'+f.settings.default_value+'" class="ZebraDialog_Prompt_Input">'),f.settings.vcenter_short_message?Z("<div>").html(f.settings.message).appendTo(f.body):f.body.html(f.settings.message),"prompt"===f.settings.type&&(f.settings.message=Z(".ZebraDialog_Prompt_Input",f.body)),"prompt"===f.settings.type&&Z(".ZebraDialog_Prompt_Input",f.body).on("keypress",function(t){13===t.keyCode&&(m?m.trigger("click"):f.close(!0,this.value))}),f.settings.source&&"object"==typeof f.settings.source)for(p in s=f.settings.vcenter_short_message?Z("div:first",f.body):f.body,f.settings.source)switch(p){case"ajax":t="string"==typeof f.settings.source[p]?{url:f.settings.source[p]}:f.settings.source[p],l=Z("<div>").attr("class","ZebraDialog_Preloader").appendTo(s),t.success=function(t){l.remove(),s.append(t),y(!1)},Z.ajax(t);break;case"iframe":a={width:"100%",height:"100%",marginheight:"0",marginwidth:"0",frameborder:"0"},r=Z.extend(a,"string"==typeof f.settings.source[p]?{src:f.settings.source[p]}:f.settings.source[p]),s.append(Z("<iframe>").attr(r));break;case"inline":s.append(f.settings.source[p])}return f.body.appendTo(f.dialog),(e=function(){if(!0!==f.settings.buttons&&!Z.isArray(f.settings.buttons))return!1;if(!0===f.settings.buttons)switch(f.settings.type){case"question":case"warning":case"prompt":f.settings.buttons=["Ok","Cancel"];break;default:f.settings.buttons=["Ok"]}return f.settings.buttons}())?(i=Z("<div>",{"class":"ZebraDialog_Buttons"}).appendTo(f.dialog),Z.each(e,function(t,s){var e=Z("<a>",{href:"javascript:void(0)","class":"ZebraDialog_Button_"+t+(void 0!==s.custom_class&&""!==s.custom_class.toString().trim()?" "+s.custom_class:"")});void 0!==s.caption?e.html(s.caption):e.html(s),e.on("click",function(){var t=!0,e="prompt"===f.settings.type&&Z(".ZebraDialog_Prompt_Input",f.body).length?Z(".ZebraDialog_Prompt_Input",f.body).val():void 0;void 0!==s.callback&&(t=s.callback(f.dialog,e)),!1!==t&&f.close(void 0!==s.caption?s.caption:s,e)}),e.appendTo(i),void 0!==s.default_confirmation&&s.default_confirmation&&(m=e)}),f.settings.center_buttons&&i.addClass("ZebraDialog_Buttons_Centered")):f.dialog.addClass("ZebraDialog_NoButtons"),f.dialog.appendTo("body"),f.settings.show_close_button?Z('<a href="javascript:void(0)" class="ZebraDialog_Close">&times;</a>').on("click",function(t){t.preventDefault(),f.close()}).appendTo(c||f.body):f.dialog.addClass("ZebraDialog_NoCloseButton"),Z(window).on("resize.Zebra_Dialog",function(){clearTimeout(h),h=setTimeout(function(){y()},100)}),f.settings.keyboard&&Z(document).on("keyup.Zebra_Dialog",function(t){return 27===t.which&&f.close(),!0}),f.isIE6&&Z(window).on("scroll.Zebra_Dialog",function(){v()}),!1!==f.settings.auto_close&&(f.dialog.on("click",function(){clearTimeout(f.timeout),f.close()}),f.timeout=setTimeout(f.close,f.settings.auto_close)),y(!1),"prompt"===f.settings.type&&(Z(".ZebraDialog_Prompt_Input",f.body).focus(),f.settings.message.get(0).setSelectionRange?(g=2*f.settings.message.val().length,setTimeout(function(){f.settings.message.get(0).setSelectionRange(g,g)},1)):f.settings.message.val(f.settings.message.val())),f},f.close=function(t,e){Z(document).off(".Zebra_Dialog"),Z(window).off(".Zebra_Dialog"),f.overlay&&f.overlay.animate({opacity:"0"},f.settings.animation_speed_hide,function(){f.overlay.remove()}),f.dialog.animate({top:"0",opacity:"0"},f.settings.animation_speed_hide,function(){f.dialog.remove(),f.settings.onClose&&"function"==typeof f.settings.onClose&&f.settings.onClose(void 0!==t?t:"",e)})},f.update=function(){clearTimeout(h),h=setTimeout(function(){y()},100)},D.init(),f.init()}}(jQuery);