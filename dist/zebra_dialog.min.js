!function(y){"use strict";y.Zebra_Dialog=function(){var p,u={animation_speed_hide:250,animation_speed_show:0,auto_close:!(this.version="1.6.0"),buttons:!0,center_buttons:!1,custom_class:!1,keyboard:!0,max_height:0,message:"",modal:!0,overlay_close:!0,overlay_opacity:".9",position:"center",reposition_speed:500,show_close_button:!0,source:!1,title:"",type:"information",vcenter_short_message:!0,width:0,onClose:null},h=this,f={},m=function(){var t,e,s,i=y(window).width(),o=y(window).height(),a=h.dialog.width(),n=h.dialog.height(),r={left:0,top:0,right:i-a,bottom:o-n,center:(i-a)/2,middle:(o-n)/2};h.dialog_left=void 0,h.dialog_top=void 0,y.isArray(h.settings.position)&&2===h.settings.position.length&&"string"==typeof h.settings.position[0]&&h.settings.position[0].match(/^(left|right|center)[\s0-9\+\-]*$/)&&"string"==typeof h.settings.position[1]&&h.settings.position[1].match(/^(top|bottom|middle)[\s0-9\+\-]*$/)&&(h.settings.position[0]=h.settings.position[0].toLowerCase(),h.settings.position[1]=h.settings.position[1].toLowerCase(),y.each(r,function(t,e){var s,i;for(s=0;s<2;s++)(i=h.settings.position[s].replace(t,e))!==h.settings.position[s]&&(0===s?h.dialog_left=g(i):h.dialog_top=g(i))})),void 0!==h.dialog_left&&void 0!==h.dialog_top||(h.dialog_left=r.center,h.dialog_top=r.middle),h.dialog_top<0&&(h.dialog_top=0),o<n&&h.message.css("height",o-(y(".ZebraDialog_Title",h.dialog)?y(".ZebraDialog_Title",h.dialog).outerHeight():0)-(y(".ZebraDialog_ButtonsOuter",h.dialog)?y(".ZebraDialog_ButtonsOuter",h.dialog).outerHeight():0)-(parseFloat(h.message.css("paddingTop"))||0)-(parseFloat(h.message.css("paddingBottom"))||0)-(parseFloat(h.message.css("borderTopWidth"))||0)-(parseFloat(h.message.css("borderBottomWidth"))||0)),h.settings.vcenter_short_message&&(e=(t=h.message.find("div:first")).height())<(s=h.message.height())&&t.css({"padding-top":(s-e)/2}),"boolean"==typeof arguments[0]&&!1===arguments[0]||0===h.settings.reposition_speed?h.dialog.css({left:h.dialog_left,top:h.dialog_top,visibility:"visible",opacity:0}).animate({opacity:"1"},h.settings.animation_speed_show):(h.dialog.stop(!0),h.dialog.css("visibility","visible").animate({left:h.dialog_left,top:h.dialog_top},h.settings.reposition_speed)),void 0===p&&h.dialog.find("a[class^=ZebraDialog_Button]:first").focus(),h.isIE6&&setTimeout(_,500)},_=function(){var t=y(window).scrollTop(),e=y(window).scrollLeft();h.settings.modal&&h.overlay.css({top:t,left:e}),h.dialog.css({left:h.dialog_left+e,top:h.dialog_top+t})},v=function(){switch(h.settings.type){case"confirmation":case"error":case"information":case"question":case"warning":return h.settings.type.charAt(0).toUpperCase()+h.settings.type.slice(1).toLowerCase();default:return!1}},g=function(t){var e=0;for(t=t.replace(/\s/g,"").match(/[+\-]?([0-9\.\s]+)/g)||[];t.length;)e+=parseFloat(t.shift());return e},b={init:function(){this.name=this.searchString(this.dataBrowser)||"",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(t){var e,s,i;for(e=0;e<t.length;e++)if(s=t[e].string,i=t[e].prop,this.versionSearchString=t[e].versionSearch||t[e].identity,s){if(-1!==s.indexOf(t[e].subString))return t[e].identity}else if(i)return t[e].identity},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};return h.settings={},"string"==typeof arguments[0]&&(f.message=arguments[0]),"object"!=typeof arguments[0]&&"object"!=typeof arguments[1]||(f=y.extend(f,"object"==typeof arguments[0]?arguments[0]:arguments[1])),h.init=function(){var t,e,i,s,o,a,n,r,g,l,c,d;if(h.settings=y.extend({},u,f),h.isIE6="explorer"===b.name&&6===b.version||!1,h.settings.modal&&(h.overlay=y("<div>",{class:"ZebraDialogOverlay"}).css({position:h.isIE6?"absolute":"fixed",left:0,top:0,opacity:h.settings.overlay_opacity}),h.settings.overlay_close&&h.overlay.on("click",function(){h.close()}),h.overlay.appendTo("body")),h.dialog=y("<div>",{class:"ZebraDialog"+(h.settings.custom_class?" "+h.settings.custom_class:"")}).css({position:h.isIE6?"absolute":"fixed",left:0,top:0,visibility:"hidden"}),!h.settings.buttons&&h.settings.auto_close&&h.dialog.attr("id","ZebraDialog_"+Math.floor(9999999*Math.random())),c=parseInt(h.settings.width,10),!isNaN(c)&&c===h.settings.width&&c.toString()===h.settings.width.toString()&&0<c&&h.dialog.css({width:h.settings.width}),h.settings.title&&(l=y("<h3>",{class:"ZebraDialog_Title"}).html(h.settings.title).appendTo(h.dialog)),s=function(){if(!0!==h.settings.buttons&&!y.isArray(h.settings.buttons))return!1;if(!0===h.settings.buttons)switch(h.settings.type){case"question":case"warning":h.settings.buttons=["Ok","Cancel"];break;default:h.settings.buttons=["Ok"]}return h.settings.buttons}(),e=y("<div>",{class:"ZebraDialog_BodyOuter"+(h.settings.title?"":" ZebraDialog_NoTitle")+(s?"":" ZebraDialog_NoButtons")}).appendTo(h.dialog),h.message=y("<div>",{class:"ZebraDialog_Body"+(!1!==v()?" ZebraDialog_Icon ZebraDialog_"+v():"")}),0<h.settings.max_height&&(h.message.css("max-height",h.settings.max_height),h.isIE6&&h.message.attr("style","height: expression(this.scrollHeight > "+h.settings.max_height+' ? "'+h.settings.max_height+'px" : "85px")')),h.settings.vcenter_short_message?y("<div>").html(h.settings.message).appendTo(h.message):h.message.html(h.settings.message),h.settings.source&&"object"==typeof h.settings.source)for(d in o=h.settings.vcenter_short_message?y("div:first",h.message):h.message,h.settings.source)switch(d){case"ajax":t="string"==typeof h.settings.source[d]?{url:h.settings.source[d]}:h.settings.source[d],g=y("<div>").attr("class","ZebraDialog_Preloader").appendTo(o),t.success=function(t){g.remove(),o.append(t),m(!1)},y.ajax(t);break;case"iframe":n={width:"100%",height:"100%",marginheight:"0",marginwidth:"0",frameborder:"0"},r=y.extend(n,"string"==typeof h.settings.source[d]?{src:h.settings.source[d]}:h.settings.source[d]),o.append(y("<iframe>").attr(r));break;case"inline":o.append(h.settings.source[d])}return h.message.appendTo(e),s&&(s.reverse(),i=y("<div>",{class:"ZebraDialog_Buttons"}).appendTo(h.dialog),y.each(s,function(t,e){var s=y("<a>",{href:"javascript:void(0)",class:"ZebraDialog_Button_"+t+(void 0!==e.custom_class&&""!==e.custom_class.toString().trim()?" "+e.custom_class:"")});void 0!==e.caption?s.html(e.caption):s.html(e),s.on("click",function(){var t=!0;void 0!==e.callback&&(t=e.callback(h.dialog)),!1!==t&&h.close(void 0!==e.caption?e.caption:e)}),s.appendTo(i)}),i.wrap(y("<div>").addClass("ZebraDialog_ButtonsOuter"+(h.settings.center_buttons?" ZebraDialog_Buttons_Centered":"")))),h.dialog.appendTo("body"),h.settings.show_close_button&&(a=y('<a href="javascript:void(0)" class="ZebraDialog_Close">&times;</a>').on("click",function(t){t.preventDefault(),h.close()}).appendTo(l||h.message),l&&a.css({right:parseInt(l.css("paddingRight"),10),top:(parseInt(l.css("height"),10)+parseInt(l.css("paddingTop"),10)+parseInt(l.css("paddingBottom"),10)-a.height())/2})),y(window).on("resize.Zebra_Dialog",function(){clearTimeout(p),p=setTimeout(function(){m()},100)}),h.settings.keyboard&&y(document).on("keyup.Zebra_Dialog",function(t){return 27===t.which&&h.close(),!0}),h.isIE6&&y(window).on("scroll.Zebra_Dialog",function(){_()}),!1!==h.settings.auto_close&&(h.dialog.on("click",function(){clearTimeout(h.timeout),h.close()}),h.timeout=setTimeout(h.close,h.settings.auto_close)),m(!1),h},h.close=function(t){y(document).off(".Zebra_Dialog"),y(window).off(".Zebra_Dialog"),h.overlay&&h.overlay.animate({opacity:"0"},h.settings.animation_speed_hide,function(){h.overlay.remove()}),h.dialog.animate({top:"0",opacity:"0"},h.settings.animation_speed_hide,function(){h.dialog.remove(),h.settings.onClose&&"function"==typeof h.settings.onClose&&h.settings.onClose(void 0!==t?t:"")})},b.init(),h.init()}}(jQuery);